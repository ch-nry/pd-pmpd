#N canvas 700 38 722 879 10;
#X msg 30 69 reset;
#X obj 30 810 dac~;
#X msg 93 454 posX \$1 \$2;
#X msg 98 476 forceX \$1 \$2;
#X obj 229 742 osc~ 444;
#X text 69 69 clear everything;
#X msg 101 509 setM \$1 \$2;
#X msg 74 233 inForceX \$1 \$2 \$3;
#X msg 79 280 inPosX \$1 \$2 \$3;
#X msg 189 233 inForceY \$1 \$2 \$3;
#X msg 182 280 inPosY \$1 \$2 \$3;
#X msg 83 334 outPosX \$1 \$2 \$3;
#X msg 193 334 outPosY \$1 \$2 \$3;
#X msg 93 392 outSpeed \$1 \$2 \$3;
#X msg 87 370 outSpeedX \$1 \$2 \$3;
#X msg 208 370 outSpeedY \$1 \$2 \$3;
#X msg 168 454 posY \$1 \$2;
#X msg 183 476 forceY \$1 \$2;
#X obj 30 772 pmpd3d~ 1 1;
#X msg 41 100 mass \$1 \$2 \$3 \$4 \$5;
#X msg 286 280 inPosZ \$1 \$2 \$3;
#X msg 303 334 outPosZ \$1 \$2 \$3;
#X msg 330 370 outSpeedZ \$1 \$2 \$3;
#X msg 305 233 inForceZ \$1 \$2 \$3;
#X msg 241 454 posZ \$1 \$2;
#X msg 268 476 forceZ \$1 \$2;
#X msg 174 509 setDEnv \$1 \$2;
#X msg 265 509 setDEnvOffset \$1 \$2;
#X msg 52 137 link \$1 \$2 \$3 \$4 \$5;
#X msg 169 717 bang;
#X msg 64 167 NLlink \$1 \$2 \$3 \$4 \$5 \$6 \$7 \$8;
#X text 19 33 all these messages need to be sent only once to create the structure of a physical model:;
#X text 168 89 create a mass with arguments : weight of the mass (\$1) \, initial position X Y Z (\$2 \, \$3 and \$4) \, and velocity damping (\$5). A mass with weight 0 will not move., f 65;
#X text 178 131 connect two masses (\$1 and \$2) with link rigidity \$3 \, damping \$4 and length \$5;
#X text 256 166 like the link message \, but with extra arguments :;
#X text 277 181 \$5 is the exponent for the non-linear rigidity;
#X text 277 195 \$6 is the length of the link;
#X text 277 209 \$7 and \$8 are the min and max length of the link;
#X text 98 300 the same inlet can be used to move several masses and send forces to them through multiple inForce and inPos messages for this inlet, f 90;
#X text 89 252 you can send many forces to a single mass \, the resulting force will be the sum of all forces, f 92;
#X text 113 411 the output of an outlet is the sum of the contributions of all out* messages, f 76;
#X text 93 434 these messages interact with the simulation in real time:;
#X text 311 453 change the position \$2 of a fixed mass \$1;
#X text 351 475 send force \$2 to mass \$1;
#X text 394 503 change mass settings (mass \, damping and offset of the damping (to impose a velocity), f 44;
#X text 153 6 pmpd3d~ : 3d particle-based physical modeling for audio synthesis, f 66;
#X text 203 716 print the current state of the model in the console;
#X text 284 741 interaction with the simulation at audio rate;
#X text 413 327 connect the X \, Y or Z position of mass \$2 to outlet \$1 with amplitude \$3, f 38;
#X text 420 227 signal on inlet \$1 sends force in X \, Y or Z direction to mass \$2 with amplitude \$3, f 41;
#X text 389 273 signal on inlet \$1 controls the X \, Y or Z position of mass \$2 with amplitude \$3, f 41;
#X text 452 365 connect the velocity of mass \$2 to outlet \$1 with amplitude \$3 (for X \, Y \, Z direction or overall velocity), f 35;
#X msg 124 641 setNLD \$1 \$2;
#X msg 130 663 setNLL \$1 \$2;
#X msg 216 663 setNLLMin \$1 \$2;
#X msg 321 663 setNLLMax \$1 \$2;
#X msg 121 619 setNLKPow \$1 \$2;
#X msg 116 597 setNLK \$1 \$2 (\$3);
#X msg 134 685 setNLLCurrent \$1 (\$2);
#X text 227 596 change NLlink settings: rigidity and (optional) rigidity exponent, f 65;
#X text 272 681 mix between set length and current length (0..1) (defaults to 1 if no second argument given), f 49;
#X text 421 663 change length \, min length and max length;
#X text 205 641 change NLlink damping;
#X text 219 618 change rigidity exponent (similar to third argument above);
#X msg 179 542 setD \$1 \$2;
#X msg 106 542 setK \$1 \$2;
#X msg 253 542 setL \$1 \$2;
#X msg 112 564 setLCurrent \$1 (\$2);
#X text 325 541 change link settings: rigidity \, damping \, length;
#X text 237 559 mix between set length and current length (0..1) (defaults to 1 if no second argument given), f 48;
#X text 106 771 arg1 : number of audio inlets (default: 1);
#X text 106 785 arg2 : number of audio outlets (default: 1);
#X text 106 802 arg3 : max. number of masses (default: 10000);
#X text 106 816 arg4 : max. number of links (default: 10000);
#X text 106 847 arg6 : max. number outlet assignments (default: equal to outlet count), f 70;
#X text 106 833 arg5 : max. number inlet assigments (default: equal to inlet count), f 67;
#X connect 0 0 18 0;
#X connect 2 0 18 0;
#X connect 3 0 18 0;
#X connect 4 0 18 0;
#X connect 6 0 18 0;
#X connect 7 0 18 0;
#X connect 8 0 18 0;
#X connect 11 0 18 0;
#X connect 13 0 18 0;
#X connect 14 0 18 0;
#X connect 18 0 1 0;
#X connect 18 0 1 1;
#X connect 19 0 18 0;
#X connect 28 0 18 0;
#X connect 29 0 18 0;
#X connect 30 0 18 0;
#X connect 52 0 18 0;
#X connect 53 0 18 0;
#X connect 56 0 18 0;
#X connect 57 0 18 0;
#X connect 58 0 18 0;
#X connect 65 0 18 0;
#X connect 67 0 18 0;
